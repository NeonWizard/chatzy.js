"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[477],{10:e=>{e.exports=JSON.parse('{"blogPosts":[{"id":"reverse-engineering-chatzy","metadata":{"permalink":"/blog/reverse-engineering-chatzy","source":"@site/blog/2022-08-05-reverse-engineering-chatzy.md","title":"Reverse Engineering Chatzy","description":"Login","date":"2022-08-05T00:00:00.000Z","formattedDate":"August 5, 2022","tags":[],"hasTruncateMarker":false,"authors":[{"name":"NeonWizard","title":"Core Developer"}],"frontMatter":{"slug":"reverse-engineering-chatzy","title":"Reverse Engineering Chatzy","authors":{"name":"NeonWizard","title":"Core Developer"},"tags":[]}},"content":"## Login\\n\\nLogging in is simple - just a few constants, alongside the username and password for the user.\\nThe response body is just some code which I\'m assuming just redirects the page to the homepage.\\nThe only interesting part of the response is the `set-cookie` header, particularly the ChatzyUser cookie.\\nThis ChatzyUser cookie is the user\'s email address appended with an ampersand and then some random characters.\\nInterestingly - this cookie can be omitted from the call to join a room.\\nSomehow it\'s used to fetch the API token, which is currently X3813 sent via an injected script tag.\\n\\n## Join Room\\n\\nLogging in is also fairly straightforward. A few constants, some user configuration (nickname, color), and room information.\\nInteresting to note, as mentioned in the \'Login\' section, the ChatzyUser cookie can be omitted without affecting the call.\\nThis is because authentication is done by (currently) X3813 in the post body, which is retrieved from an injected script tag.\\n\\n## X3813\\n\\nThis is retrieved from an injected script tag. It\'s unknown why this is the behavior, but seems to be generated into the webpage\\nwhenever the ChatzyUser cookie is sent in a GET request for page HTML. Assumed to be used for all authenticated POST requests.\\n\\n## ChatzyUser\\n\\nThis is retrieved from a cookie set when logging in. This is assumed to be used for all authenticated webpage GET requests.\\n\\n## Websocket\\n\\nThere is a websocket which is literally only there for receiving data in realtime.\\nMessages and data are still sent with POST requests.\\n\\n## Flow\\n\\nLogin\\n\\n- <- username, password\\n- -> ChatzyUser cookie\\n\\nHomepage Fetch\\n\\n- <- ChatzyUser cookie\\n- -> X3813 variable in injected script tag\\n\\nJoin Room\\n\\n- <- X3813 script variable\\n- -> X7910 room access token\\n\\nSend Message\\n\\n- <- X7910 room access token"}]}')}}]);